# 담벼락 (Wall Paper) - 제품 요구사항 문서 (PRD)

## 1. 프로젝트 개요 및 목표

### 1.1 프로젝트 개요
담벼락은 포스트잇 스타일의 웹 기반 메모 애플리케이션입니다. 사용자가 담벼락에 메모를 붙이듯 직관적으로 메모를 작성하고 관리할 수 있습니다.

### 1.2 목표
- 간편하고 직관적인 메모 작성 환경 제공
- 비밀번호 기반의 간단한 접근 제어
- 포스트잇 형태의 시각적으로 매력적인 UI 제공
- 빠르고 안정적인 메모 저장 및 조회

### 1.3 성공 지표
- 메모 작성 시 3초 이내 저장 완료
- 페이지 로드 시간 2초 이내
- 99% 이상의 서비스 가용성

---

## 2. 타겟 사용자

### 2.1 주요 사용자
- 간단한 메모를 빠르게 기록하고 싶은 개인 사용자
- 가족이나 소규모 그룹이 공유하는 메모판이 필요한 사용자
- 할 일 목록이나 아이디어를 시각적으로 정리하고 싶은 사용자

### 2.2 사용자 시나리오
1. 개인 메모: 혼자서 아이디어나 할 일을 기록
2. 가족 메모판: 가족 구성원이 공유하는 메시지 보드
3. 팀 아이디어 보드: 소규모 팀의 브레인스토밍 공간

---

## 3. 핵심 기능 명세

### 3.1 인증 기능
| 기능 | 설명 | 우선순위 |
|------|------|----------|
| 비밀번호 입력 | 담벼락 접근을 위한 비밀번호 입력 화면 | P0 |
| 세션 유지 | 브라우저 세션 동안 로그인 상태 유지 | P0 |
| 로그아웃 | 세션 종료 및 비밀번호 재입력 요구 | P1 |

### 3.2 메모 관리 기능
| 기능 | 설명 | 우선순위 |
|------|------|----------|
| 메모 작성 | 새로운 포스트잇 메모 생성 | P0 |
| 메모 조회 | 담벼락의 모든 메모 표시 | P0 |
| 메모 수정 | 기존 메모 내용 편집 | P0 |
| 메모 삭제 | 메모 제거 | P0 |
| 메모 색상 선택 | 포스트잇 배경색 선택 (노랑, 분홍, 파랑, 초록 등) | P1 |
| 메모 위치 이동 | 드래그앤드롭으로 메모 위치 변경 | P2 |

### 3.3 부가 기능
| 기능 | 설명 | 우선순위 |
|------|------|----------|
| 작성 시간 표시 | 메모 작성/수정 시간 표시 | P1 |
| 메모 검색 | 메모 내용 검색 | P2 |
| 메모 고정 | 중요 메모 상단 고정 | P2 |

---

## 4. 기술 스택

### 4.1 프론트엔드
- **Framework**: React 18+ 또는 Next.js 14+
- **Language**: TypeScript
- **Styling**: Tailwind CSS
- **State Management**: React Query (서버 상태), Zustand (클라이언트 상태)

### 4.2 백엔드
- **BaaS**: Supabase
  - Database: PostgreSQL
  - Authentication: Supabase Auth (선택적)
  - Real-time: Supabase Realtime (선택적)

### 4.3 배포
- **Hosting**: Vercel 또는 Netlify
- **Domain**: 커스텀 도메인 (선택적)

---

## 5. 데이터 모델 (Supabase 테이블 구조)

### 5.1 walls 테이블 (담벼락)
```sql
CREATE TABLE walls (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  name VARCHAR(100) NOT NULL,
  password_hash VARCHAR(255) NOT NULL,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

| 컬럼 | 타입 | 설명 |
|------|------|------|
| id | UUID | 담벼락 고유 식별자 |
| name | VARCHAR(100) | 담벼락 이름 |
| password_hash | VARCHAR(255) | 해시된 비밀번호 |
| created_at | TIMESTAMP | 생성 시간 |
| updated_at | TIMESTAMP | 수정 시간 |

### 5.2 memos 테이블 (메모)
```sql
CREATE TABLE memos (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  wall_id UUID NOT NULL REFERENCES walls(id) ON DELETE CASCADE,
  content TEXT NOT NULL,
  color VARCHAR(20) DEFAULT 'yellow',
  position_x INTEGER DEFAULT 0,
  position_y INTEGER DEFAULT 0,
  is_pinned BOOLEAN DEFAULT FALSE,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

CREATE INDEX idx_memos_wall_id ON memos(wall_id);
```

| 컬럼 | 타입 | 설명 |
|------|------|------|
| id | UUID | 메모 고유 식별자 |
| wall_id | UUID | 소속 담벼락 ID (FK) |
| content | TEXT | 메모 내용 |
| color | VARCHAR(20) | 메모 색상 (yellow, pink, blue, green, purple) |
| position_x | INTEGER | X 좌표 위치 |
| position_y | INTEGER | Y 좌표 위치 |
| is_pinned | BOOLEAN | 고정 여부 |
| created_at | TIMESTAMP | 생성 시간 |
| updated_at | TIMESTAMP | 수정 시간 |

### 5.3 RLS (Row Level Security) 정책
```sql
-- walls 테이블 RLS
ALTER TABLE walls ENABLE ROW LEVEL SECURITY;

-- memos 테이블 RLS
ALTER TABLE memos ENABLE ROW LEVEL SECURITY;

-- 인증된 세션에서만 접근 가능하도록 정책 설정
CREATE POLICY "Allow authenticated access" ON memos
  FOR ALL USING (true);
```

---

## 6. UI/UX 요구사항

### 6.1 화면 구성

#### 6.1.1 비밀번호 입력 화면
- 중앙 정렬된 비밀번호 입력 폼
- 담벼락 로고/타이틀
- 비밀번호 입력 필드 (마스킹 처리)
- 입력 버튼
- 오류 메시지 표시 영역

#### 6.1.2 메인 담벼락 화면
- 코르크보드/담벼락 스타일 배경
- 포스트잇 스타일의 메모 카드들
- 새 메모 추가 버튼 (+ 아이콘)
- 상단 툴바 (로그아웃, 검색 등)

#### 6.1.3 메모 카드
- 포스트잇 형태 디자인 (접힌 모서리, 그림자 효과)
- 메모 내용 (최대 500자)
- 색상 선택 옵션
- 수정/삭제 버튼 (호버 시 표시)
- 작성 시간 표시

### 6.2 디자인 가이드라인
- **색상 팔레트**:
  - 배경: 코르크보드 색상 (#D4A574) 또는 담벼락 색상 (#F5F5DC)
  - 포스트잇 노랑: #FFEB3B
  - 포스트잇 분홍: #F8BBD9
  - 포스트잇 파랑: #BBDEFB
  - 포스트잇 초록: #C8E6C9
  - 포스트잇 보라: #E1BEE7

- **타이포그래피**:
  - 메모 내용: 손글씨 느낌의 폰트 (나눔손글씨, 고딕 A1 등)
  - UI 요소: 시스템 폰트

- **반응형 디자인**:
  - 모바일: 1열 그리드
  - 태블릿: 2열 그리드
  - 데스크톱: 3-4열 그리드 또는 자유 배치

### 6.3 인터랙션
- 메모 생성: 클릭으로 새 메모 추가
- 메모 수정: 메모 클릭 시 편집 모드 진입
- 메모 삭제: 삭제 버튼 클릭 + 확인 다이얼로그
- 드래그앤드롭: 메모 위치 이동 (P2)

---

## 7. 보안 요구사항

### 7.1 비밀번호 보안
- 비밀번호는 bcrypt 또는 argon2로 해시하여 저장
- 최소 비밀번호 길이: 4자 이상
- 비밀번호 시도 제한: 5회 실패 시 1분 대기

### 7.2 세션 보안
- 세션 토큰은 httpOnly 쿠키 또는 sessionStorage에 저장
- 세션 만료 시간: 24시간
- 브라우저 종료 시 세션 삭제

### 7.3 데이터 보안
- HTTPS 필수
- Supabase RLS 활성화
- SQL Injection 방지 (Supabase 클라이언트 사용)
- XSS 방지 (React 기본 이스케이핑)

### 7.4 API 보안
- Supabase API Key는 환경변수로 관리
- 클라이언트에서는 anon key만 사용

---

## 8. 성능 요구사항

### 8.1 응답 시간
| 작업 | 목표 시간 |
|------|-----------|
| 초기 페이지 로드 | < 2초 |
| 메모 저장 | < 1초 |
| 메모 목록 조회 | < 500ms |
| 메모 삭제 | < 500ms |

### 8.2 용량 제한
- 담벼락당 최대 메모 수: 100개
- 메모당 최대 글자 수: 500자
- 동시 접속자 수: 10명 (동일 담벼락)

### 8.3 최적화
- 이미지 최적화 (WebP 포맷)
- 코드 스플리팅
- 레이지 로딩
- Supabase 쿼리 최적화

---

## 9. 제약사항

### 9.1 기술적 제약
- Supabase 무료 플랜 제한 사항 준수
  - 500MB 데이터베이스 용량
  - 월 50,000 MAU
  - 2GB 대역폭
- 이미지 첨부 기능 미지원 (1차 버전)

### 9.2 기능적 제약
- 사용자 계정 시스템 없음 (비밀번호만으로 접근)
- 다중 담벼락 지원 여부는 추후 결정
- 오프라인 모드 미지원

### 9.3 브라우저 지원
- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+
- 모바일 브라우저 (iOS Safari, Android Chrome)

---

## 10. 마일스톤

### Phase 1: MVP (핵심 기능)
- 비밀번호 인증
- 메모 CRUD
- 기본 UI

### Phase 2: 개선
- 메모 색상 선택
- 드래그앤드롭
- 메모 검색
- UI/UX 개선

### Phase 3: 확장 (선택)
- 다중 담벼락
- 실시간 동기화
- 알림 기능

---

## 부록: 와이어프레임

```
┌─────────────────────────────────────────────────────┐
│                    담벼락                           │
├─────────────────────────────────────────────────────┤
│                                                     │
│              ┌─────────────────┐                    │
│              │   🔒 비밀번호    │                    │
│              │  [____________]  │                    │
│              │    [입장하기]    │                    │
│              └─────────────────┘                    │
│                                                     │
└─────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────┐
│  담벼락                        [검색] [로그아웃]    │
├─────────────────────────────────────────────────────┤
│  ┌────────┐  ┌────────┐  ┌────────┐  ┌────────┐    │
│  │ 메모 1  │  │ 메모 2  │  │ 메모 3  │  │   +    │    │
│  │        │  │        │  │        │  │        │    │
│  │ 내용... │  │ 내용... │  │ 내용... │  │ 새메모  │    │
│  │        │  │        │  │        │  │        │    │
│  │ 12:30  │  │ 14:20  │  │ 09:15  │  │        │    │
│  └────────┘  └────────┘  └────────┘  └────────┘    │
│                                                     │
│  ┌────────┐  ┌────────┐                            │
│  │ 메모 4  │  │ 메모 5  │                            │
│  │        │  │        │                            │
│  │ 내용... │  │ 내용... │                            │
│  │        │  │        │                            │
│  │ 11:00  │  │ 16:45  │                            │
│  └────────┘  └────────┘                            │
└─────────────────────────────────────────────────────┘
```

---

*문서 버전: 1.0*
*작성일: 2024년*
*최종 수정: 2024년*
